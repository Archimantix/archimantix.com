{% if page.url contains '/about' %}
  <style>
    /* About Navigation Styles */
    .about-nav {
      margin-bottom: 2rem;
    }

    .about-nav h4 {
      color: var(--heading-color);
      margin-bottom: 1rem;
      font-size: 1.1em;
      font-weight: 600;
    }

    .about-nav-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .about-nav-item {
      transition: all 0.3s ease;
    }

    .about-nav-link {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      color: var(--text-muted);
      text-decoration: none;
      font-weight: 400;
      font-size: 0.9em;
      transition: all 0.3s ease;
      border-radius: 6px;
    }

    .about-nav-link:hover {
      color: var(--link-color);
      text-decoration: none;
      background: rgba(var(--link-color-rgb), 0.1);
      transform: translateX(3px);
    }

    .about-nav-link.active {
      color: var(--link-color);
      font-weight: 700;
      font-size: 1em;
      background: rgba(var(--link-color-rgb), 0.15);
      border-left: 3px solid var(--link-color);
      padding-left: 9px;
    }

    .about-nav-icon {
      font-size: 1em;
      width: 18px;
      text-align: center;
    }

    .about-nav-link.active .about-nav-icon {
      font-size: 1.1em;
    }

    /* Smooth scroll behavior */
    html {
      scroll-behavior: smooth;
    }
  </style>

  <div class="about-nav">
    <h4>Sections</h4>
    <ul class="about-nav-list">
      <li class="about-nav-item">
        <a href="#news" class="about-nav-link">
          <span class="about-nav-icon">üì∞</span>
          <span>News</span>
        </a>
      </li>
      <li class="about-nav-item">
        <a href="#publications" class="about-nav-link">
          <span class="about-nav-icon">üìö</span>
          <span>Publications</span>
        </a>
      </li>
      <li class="about-nav-item">
        <a href="#services" class="about-nav-link">
          <span class="about-nav-icon">ü§ù</span>
          <span>Services</span>
        </a>
      </li>
      <li class="about-nav-item">
        <a href="#teaching" class="about-nav-link">
          <span class="about-nav-icon">üéì</span>
          <span>Teaching</span>
        </a>
      </li>
      <li class="about-nav-item">
        <a href="#awards" class="about-nav-link">
          <span class="about-nav-icon">üèÜ</span>
          <span>Awards</span>
        </a>
      </li>
      <li class="about-nav-item">
        <a href="#skills" class="about-nav-link">
          <span class="about-nav-icon">üíª</span>
          <span>Skills</span>
        </a>
      </li>
    </ul>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const navLinks = document.querySelectorAll('.about-nav-link');
      const sections = document.querySelectorAll('.section');

      // Function to remove active class from all nav links
      function removeActiveClass() {
        navLinks.forEach((link) => link.classList.remove('active'));
      }

      // Function to add active class to current section's nav link
      function addActiveClass(sectionId) {
        removeActiveClass();
        const activeLink = document.querySelector(`a[href="#${sectionId}"]`);
        if (activeLink && activeLink.classList.contains('about-nav-link')) {
          activeLink.classList.add('active');
        }
      }

      // Scroll spy functionality
      function onScroll() {
        let current = '';
        sections.forEach((section) => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          if (window.pageYOffset >= sectionTop - 200) {
            current = section.getAttribute('id');
          }
        });

        if (current) {
          addActiveClass(current);
        }
      }

      // Click handlers for navigation links
      navLinks.forEach((link) => {
        link.addEventListener('click', function (e) {
          e.preventDefault();
          const targetId = this.getAttribute('href').substring(1);
          const targetSection = document.getElementById(targetId);

          if (targetSection) {
            removeActiveClass();
            this.classList.add('active');
            targetSection.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });

      // Listen for scroll events
      window.addEventListener('scroll', onScroll);

      // Set initial active state
      onScroll();
    });
  </script>
{% endif %}
